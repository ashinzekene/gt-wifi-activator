!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("queue",r):n.queue=r()}(this,function(){"use strict";function n(){}function r(r){function t(){if(!c)for(;c=h&&r>d;){var n=v+d,t=p[n],u=t.length-1,o=t[u];t[u]=f(n),--h,++d,p[n]=o.apply(null,t)||e}}function f(n){return function(r,u){if(!p[n])throw new Error;--d,++v,p[n]=null,null==w&&(null!=r?i(r):(s[n]=u,h?t():d||l()))}}function i(n){w=n,h=NaN,l()}function l(){null!=w?E(w):b?E(null,s):E.apply(null,o.concat(s))}if(!(r>=1))throw new Error;var a,c,w,p=[],s=[],h=0,d=0,v=0,E=n,b=!0;return a={defer:function(r){if(E!==n)throw new Error;var e=u.call(arguments,1);return e.push(r),++h,p.push(e),t(),a},abort:function(){if(null==w){for(var n,r=v+d;--r>=0;)(n=p[r])&&n.abort&&n.abort();i(new Error("abort"))}return a},await:function(r){if(E!==n)throw new Error;return E=r,b=!1,h||d||l(),a},awaitAll:function(r){if(E!==n)throw new Error;return E=r,b=!0,h||d||l(),a}}}function t(n){return r(arguments.length?+n:1/0)}var u=[].slice,e={},o=[null];return t.version="1.2.1",t});